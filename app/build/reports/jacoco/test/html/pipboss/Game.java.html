<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Game.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">pipboss</a> &gt; <span class="el_source">Game.java</span></div><h1>Game.java</h1><pre class="source lang-java linenums">package pipboss;
import java.util.*;

public class Game {
    private List&lt;Player&gt; players;
    private List&lt;Casino&gt; casinos;
    private List&lt;String&gt; miniStrGameList;
    private List&lt;MiniGame&gt; miniGames;
    private Deck deckk;
    private List&lt;ConsoleView&gt; consoleView;
    private List&lt;Controller&gt; controller;

<span class="fc" id="L13">    public Game(List&lt;Player&gt; players, List&lt;String&gt; miniStrGameList, List&lt;ConsoleView&gt; consoleview, List&lt;Controller&gt; controller){</span>
<span class="fc" id="L14">        this.consoleView = consoleview;</span>
<span class="fc" id="L15">        this.controller = controller;</span>
<span class="fc" id="L16">        this.players = players;</span>
<span class="fc" id="L17">        this.miniStrGameList = miniStrGameList;</span>
<span class="fc" id="L18">        miniGames = new ArrayList&lt;MiniGame&gt;();</span>
<span class="fc" id="L19">        casinos = new ArrayList&lt;Casino&gt;();</span>
<span class="fc" id="L20">    }</span>

    public void resetCasino() {
<span class="fc" id="L23">        MoneyPair[] pairs = new MoneyPair[6];</span>
        
<span class="fc bfc" id="L25" title="All 2 branches covered.">        for (int i = 0; i &lt; 6; i++) {</span>
<span class="pc bpc" id="L26" title="1 of 2 branches missed.">            if(deckk.getSize() &lt; 2) {</span>
<span class="nc" id="L27">                int[] passin = {3,11,4,11,5,13,6,15,7,13,8,11,9,9,10,7};</span>
<span class="nc" id="L28">                deckk = new Deck(passin, true);</span>
            }
<span class="fc" id="L30">            pairs[i] = (new MoneyPair(deckk.draw(), deckk.draw()));</span>
        }
<span class="fc" id="L32">        order(pairs);</span>

<span class="fc bfc" id="L34" title="All 2 branches covered.">        for (int i = 0; i&lt;6; i++) {</span>
<span class="fc" id="L35">            casinos.get(i).setHighMoney(pairs[i].getHighMoney());</span>
<span class="fc" id="L36">            casinos.get(i).setLowMoney(pairs[i].getLowMoney());</span>
<span class="fc" id="L37">            casinos.get(i).removePlayerDice();</span>
        }

<span class="fc" id="L40">    }</span>

    public void setCasino() {
<span class="fc" id="L43">        int[] passin = {3,11,4,11,5,13,6,15,7,13,8,11,9,9,10,7};</span>
<span class="fc" id="L44">        deckk = new Deck(passin, true);</span>

<span class="fc" id="L46">        MoneyPair[] pairs = new MoneyPair[6];</span>
        
<span class="fc bfc" id="L48" title="All 2 branches covered.">        for (int i = 0; i &lt; 6; i++) {</span>
<span class="fc" id="L49">            pairs[i] = (new MoneyPair(deckk.draw(), deckk.draw()));</span>
        }

<span class="fc" id="L52">        order(pairs);</span>

<span class="fc bfc" id="L54" title="All 2 branches covered.">        for (int i = 0; i&lt;6; i++) {</span>
<span class="fc" id="L55">            casinos.add(new Casino(pairs[i].getHighMoney(), pairs[i].getLowMoney(), i+1));</span>
<span class="fc" id="L56">            casinos.get(i).setPlayerNum(players.size());</span>
        }

<span class="fc" id="L59">        setUpMiniGames();</span>
<span class="fc" id="L60">    }</span>

    public void setUpMiniGames()    {
<span class="fc" id="L63">        Random rng = new Random();</span>
<span class="fc" id="L64">        int count = 1;</span>
<span class="fc" id="L65">        int listSize = miniStrGameList.size();</span>
<span class="pc bpc" id="L66" title="1 of 4 branches missed.">        while(listSize&gt;0 &amp;&amp; count &lt;= 3)   {</span>
<span class="fc" id="L67">            int ranNum = rng.nextInt(listSize); </span>
<span class="fc bfc" id="L68" title="All 2 branches covered.">            if(miniStrGameList.get(ranNum).equals(&quot;Jackpot&quot;))   {</span>
<span class="fc" id="L69">                miniGames.add(new Jackpot(count));</span>
<span class="fc" id="L70">                miniStrGameList.remove(ranNum);</span>
<span class="fc bfc" id="L71" title="All 2 branches covered.">            } else if(miniStrGameList.get(ranNum).equals(&quot;Pay Day&quot;))   {</span>
<span class="fc" id="L72">                miniGames.add(new PayDay(count));</span>
<span class="fc" id="L73">                miniStrGameList.remove(ranNum);</span>
<span class="fc bfc" id="L74" title="All 2 branches covered.">            } else if(miniStrGameList.get(ranNum).equals(&quot;Fifty Fifty&quot;))   {</span>
<span class="fc" id="L75">                miniGames.add(new FiftyFifty(count));</span>
<span class="fc" id="L76">                miniStrGameList.remove(ranNum);</span>
<span class="fc bfc" id="L77" title="All 2 branches covered.">            } else if(miniStrGameList.get(ranNum).equals(&quot;Lucky Punch&quot;))   {</span>
<span class="fc" id="L78">                miniGames.add(new LuckyPunch(count));</span>
<span class="fc" id="L79">                miniStrGameList.remove(ranNum);</span>
<span class="fc bfc" id="L80" title="All 2 branches covered.">            } else if(miniStrGameList.get(ranNum).equals(&quot;High Five&quot;))   {</span>
<span class="fc" id="L81">                miniGames.add(new HighFive(count));</span>
<span class="fc" id="L82">                miniStrGameList.remove(ranNum);</span>
<span class="pc bpc" id="L83" title="1 of 2 branches missed.">            } else if(miniStrGameList.get(ranNum).equals(&quot;Black Box&quot;))   {</span>
<span class="fc" id="L84">                miniGames.add(new BlackBox(count));</span>
<span class="fc" id="L85">                miniStrGameList.remove(ranNum);</span>
<span class="nc bnc" id="L86" title="All 2 branches missed.">            } else if(miniStrGameList.get(ranNum).equals(&quot;Block It&quot;))   {</span>
<span class="nc" id="L87">                miniGames.add(new BlockIt(count));</span>
<span class="nc" id="L88">                miniStrGameList.remove(ranNum);</span>
            }
<span class="fc" id="L90">            listSize = miniStrGameList.size();</span>
<span class="fc" id="L91">            count++;</span>
<span class="fc" id="L92">        }</span>
<span class="fc" id="L93">    }</span>

    public List&lt;MiniGame&gt; getMiniGames()   {
<span class="fc" id="L96">        return miniGames;</span>
    }

    public Casino getCasino(int index)  {
<span class="fc" id="L100">        return casinos.get(index);</span>
    }

    public int getNumCasinos()  {
<span class="fc" id="L104">        return casinos.size();</span>
    }

    public String rollDices(int index) {
<span class="fc" id="L108">        players.get(index).rollDice();</span>
<span class="fc" id="L109">        return players.get(index).getRollString();</span>
    }

    private void order(MoneyPair[] pairs) {
<span class="fc bfc" id="L113" title="All 2 branches covered.">        for (int i = 0; i &lt; pairs.length - 1; i++) {</span>
<span class="fc bfc" id="L114" title="All 2 branches covered.">            for (int j = 0; j &lt; pairs.length - i - 1; j++) {</span>
<span class="fc bfc" id="L115" title="All 2 branches covered.">                if (pairs[j].compareTo(pairs[j + 1]) &gt; 0) {</span>
<span class="fc" id="L116">                    MoneyPair temp = pairs[j];</span>
<span class="fc" id="L117">                    pairs[j] = pairs[j + 1];</span>
<span class="fc" id="L118">                    pairs[j + 1] = temp;</span>
<span class="fc bfc" id="L119" title="All 2 branches covered.">                } else if (pairs[j].compareTo(pairs[j + 1]) == 0) {</span>
<span class="pc bpc" id="L120" title="1 of 2 branches missed.">                    if (pairs[j].getHighMoney() &gt; pairs[j+1].getHighMoney()) {</span>
<span class="nc" id="L121">                        MoneyPair temp = pairs[j + 1];</span>
<span class="nc" id="L122">                        pairs[j + 1] = pairs[j];</span>
<span class="nc" id="L123">                        pairs[j] = temp;</span>
<span class="pc bpc" id="L124" title="1 of 2 branches missed.">                    } else if (pairs[j].getLowMoney() &gt; pairs[j+1].getLowMoney()) {</span>
<span class="nc" id="L125">                        MoneyPair temp = pairs[j + 1];</span>
<span class="nc" id="L126">                        pairs[j + 1] = pairs[j];</span>
<span class="nc" id="L127">                        pairs[j] = temp;</span>
                    }
                }
            }
        }
<span class="fc" id="L132">    }</span>

    public boolean roundEnd()   {
<span class="fc bfc" id="L135" title="All 2 branches covered.">        for (int i = 0; i &lt; players.size(); i++) {</span>
<span class="fc bfc" id="L136" title="All 2 branches covered.">            if (players.get(i).getPDice() != 0) {</span>
<span class="fc" id="L137">                return false;</span>
            }
        }
<span class="fc" id="L140">        return true;</span>
    }

    public void playTurn(int index) {
<span class="fc" id="L144">        Player p = players.get(index);</span>
<span class="fc" id="L145">        List&lt;IntBoolPair&gt; rolls = p.rollDice();</span>
<span class="fc" id="L146">        int choice = controller.get(index).getDiceChoice(rolls);</span>
<span class="pc bpc" id="L147" title="1 of 4 branches missed.">        if (choice == 0 &amp;&amp; p.getChips() &gt; 0) {</span>
<span class="fc" id="L148">            controller.get(index).useChip(p);</span>
        } else {
<span class="fc" id="L150">            ArrayList&lt;Die&gt; pDice = p.playDice(choice);</span>
<span class="fc bfc" id="L151" title="All 2 branches covered.">            for (ConsoleView v : consoleView) {</span>
<span class="fc" id="L152">                v.placeDice(casinos.get(choice-1), pDice);</span>
<span class="fc" id="L153">            }</span>
<span class="fc" id="L154">            playMiniGame(pDice.get(0).getValue(), index);</span>
        }
<span class="fc" id="L156">    }</span>
    
    public void playMiniGame(int casinoNum, int index)  {
<span class="fc bfc" id="L159" title="All 2 branches covered.">        for(int i=0; i&lt;miniGames.size(); i++)   {</span>
<span class="pc bpc" id="L160" title="1 of 2 branches missed.">            if(miniGames.get(i).associatedCasino() == casinoNum) {</span>
<span class="fc" id="L161">                int index2 = index+1;</span>
<span class="fc bfc" id="L162" title="All 2 branches covered.">                for (ConsoleView v : consoleView) {</span>
                    try{
<span class="pc" id="L164">                        v.activateMiniGame(miniGames.get(i), players.get(index), players.get(index2), </span>
<span class="nc" id="L165">                            controller.get(index), controller.get(index2), casinos);</span>
<span class="fc" id="L166">                    } catch(Exception e)    {</span>
<span class="fc" id="L167">                        v.activateMiniGame(miniGames.get(i), players.get(index), players.get(0), </span>
<span class="fc" id="L168">                        controller.get(index), controller.get(0), casinos);</span>
<span class="nc" id="L169">                    }</span>
<span class="fc" id="L170">                }</span>
            }
        }
<span class="fc" id="L173">    }</span>

    public List&lt;Casino&gt; getCasinos()    {
<span class="nc" id="L176">        return casinos;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>